clusterZone: "{{cluster_zone}}"
controller:
  ingress:
    enabled: true
    paths: []
    apiVersion: "extensions/v1beta1"
    labels: {}
    annotations:
      kubernetes.io/ingress.class: nginx
      cert-manager.io/cluster-issuer: ca-issuer
    hostName: "{{release_name}}.{{domain}}"
    tls:
      - secretName: jenkins-tls
        hosts:
          - "{{release_name}}.{{domain}}"
  additionalPlugins:
    - timestamper:1.13
    - ldap:2.7
    - gerrit-trigger:2.34.0
    - blueocean:1.25.3
  prometheus.enabled: true
  servicePort: 80
  jenkinsUrl: https://{{release_name}}.{{domain}}/
  initializeOnce: false
  JCasC:
    configScripts:
      security: |
        {% filter indent(width=8,blank=True) %}{% include 'security.yaml.j2' %}{% endfilter %}

      credentials: |
        {% filter indent(width=8,blank=True) %}{% include 'credentials.yaml.j2' %}{% endfilter %}
lifecycle:                                                                                                           
  postStart:                                                                                                         
    exec:                                                                                                            
      command:                                                                                                       
      - /bin/sh                                                                                                      
      - -c                                                                                                           
      - |                                                                                                            
        openssl s_client -connect docker.home.arpa:443  < /dev/null | openssl x509 -outform PEM > /tmp/cert.pem;
        keytool -importcert -cacerts -storepass changeit -file /tmp/cert.pem